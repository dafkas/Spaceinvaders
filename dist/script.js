!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=3)}([function(t,i,e){"use strict";i.__esModule=!0;var s=function(){function t(t,i){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.active=!1,this.image=document.createElement("img"),i.appendChild(this.image),this.image.src=t,this.image.style.position="absolute",this.image.style.zIndex="999",this.width=this.image.clientWidth,this.height=this.image.clientHeight,this.image.style.visibility="hidden"}return t.prototype.SetXPos=function(t){this.posX=t},t.prototype.SetYPos=function(t){this.posY=t},t.prototype.Move=function(){this.active&&(this.posY-=5,this.posY<=0&&(this.image.style.visibility="hidden",this.active=!1))},t.prototype.Start=function(t,i){this.SetXPos(t),this.SetYPos(i),this.image.style.visibility="visible",this.active=!0},t.prototype.Kill=function(){this.image.style.visibility="hidden",this.active=!1},t}();i.Rocket=s},function(t,i,e){"use strict";i.__esModule=!0;var s=function(){function t(t,i){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.image=document.createElement("img"),i.appendChild(this.image),this.image.src=t,this.image.style.position="absolute",this.image.style.zIndex="1000",this.width=this.image.clientWidth,this.height=this.image.clientHeight}return t.prototype.SetXPos=function(t){this.posX=t},t.prototype.SetYPos=function(t){this.posY=t},t.prototype.Move=function(t){this.SetXPos(this.posX-8),this.SetXPos(this.posX+8)},t}();i.Ship=s},function(t,i,e){"use strict";i.__esModule=!0;var s=function(){function t(i,e,s){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.currentDirection=t.Direction.Right,this.active=!1,this.viewPort=e,this.image=document.createElement("img"),this.viewPort.appendChild(this.image),this.image.src=i,this.image.style.position="absolute",this.image.style.zIndex="999",this.width=this.image.width,this.height=this.image.height,this.explosionImageURLs=s}return t.prototype.SetXPos=function(t){this.posX=t},t.prototype.SetYPos=function(t){this.posY=t},t.prototype.Move=function(){this.active&&(this.posX<=0?(this.currentDirection=t.Direction.Right,this.SetYPos(this.posY+10)):this.posX+this.width>=this.image.parentElement.clientWidth&&(this.currentDirection=t.Direction.Left,this.SetYPos(this.posY+10)),this.currentDirection==t.Direction.Right?this.SetXPos(this.posX+1):this.SetXPos(this.posX-1))},t.prototype.Start=function(t,i){this.SetXPos(t),this.SetYPos(i),this.image.style.visibility="visible",this.active=!0},t.prototype.Kill=function(){var t=this;if(this.image.style.visibility="hidden",this.active=!1,this.explosionImageURLs.length>0){this.explosionIndex=0;for(var i=0;i<this.explosionImageURLs.length;i++)setTimeout(function(){t.explosionImage||(t.explosionImage=document.createElement("img"),t.viewPort.appendChild(t.explosionImage),t.explosionImage.style.position="absolute",t.explosionImage.style.zIndex="9999"),t.explosionImage.src=t.explosionImageURLs[t.explosionIndex++]},200*i);setTimeout(function(){t.viewPort.removeChild(t.explosionImage)},200*this.explosionImageURLs.length)}},t.Direction={Left:1,Right:2},t}();i.Alien=s},function(t,i,e){"use strict";i.__esModule=!0;var s=e(2),o=e(1),n=e(0);!function(t){var i=function(){function t(t){this.viewPortHeight=600,this.viewPortWidth=800,this.viewPort=null,this.ship=null,this.rocket=null,this.aliens=null,this.lblScore=null,this.score=0,this.viewPort=document.getElementById(t),this.InitiateBattlefield(),this.InitiateEvents()}return t.prototype.InitiateBattlefield=function(){this.viewPort.style.position="absolute",this.viewPort.style.width=this.viewPortWidth.toString()+"px",this.viewPort.style.height=this.viewPortHeight.toString()+"px",this.viewPort.style.left=((document.documentElement.clientWidth-this.viewPortWidth)/2).toString()+"px",this.viewPort.style.top=((document.documentElement.clientHeight-this.viewPortHeight)/2).toString()+"px",this.viewPort.style.backgroundColor="Black",this.ship=new o.Ship("Images/Alien.png",this.viewPort),this.ship.SetXPos(this.viewPortWidth/2),this.ship.SetYPos(this.viewPortHeight-this.ship.image.height),this.rocket=new n.Rocket("Images/Rocket.png",this.viewPort),this.aliens=new Array;for(var t=0;t<2;t++)for(var i=0;i<10;i++){var e=new s.Alien("Images/Invader.png",this.viewPort,["Images/Blowup1.png","Images/Blowup2.png","Images/Blowup3.png","Images/Blowup4.png"]);e.Start(Math.max((e.width+20)*i,1),Math.max((e.height+15)*t,1)),e.currentDirection=s.Alien.Direction.Right,this.aliens.push(e)}},t.prototype.InitiateEvents=function(){var i=this;setInterval(function(){if(i.rocket.active&&i.rocket.Move(),i.rocket.active)for(var t=i.rocket.image.getBoundingClientRect(),e=0;e<i.aliens.length;e++)if(i.aliens[e].active){var s=i.aliens[e].image.getBoundingClientRect();t.right<s.left||t.left>s.right||t.bottom<s.top||t.top>s.bottom||(i.aliens[e].Kill(),i.rocket.Kill(),i.score+=1e3,i.lblScore.textContent=i.score.toString())}},1),setInterval(function(){for(var t=0;t<i.aliens.length;t++)i.aliens[t].active&&i.aliens[t].Move()},1),this.addEventListener(document,"keydown",function(e){var s=e,o=0;if(s&&s.keyCode)o=s.keyCode;else if(window.event&&window.event&&o)switch(o){case t.KeyCodes.LeftArrow:case t.KeyCodes.RightArrow:i.ship.Move(o);break;case t.KeyCodes.SpaceBar:i.rocket.active?i.rocket.Move():i.rocket.Start(i.ship.posX+i.ship.width/2,i.ship.posY)}})},t.prototype.addEventListener=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent&&t.attachEvent(i,e)},t.KeyCodes={LeftArrow:37,RightArrow:39,SpaceBar:32},t}();t.Game=i}(i.Game||(i.Game={}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGV2L1JvY2tldC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvU2hpcC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvQWxpZW4udHMiLCJ3ZWJwYWNrOi8vLy4vZGV2L0dhbWUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlJvY2tldCIsImltYWdlVVJMIiwicGFyZW50RWxlbWVudCIsInRoaXMiLCJpbWFnZSIsInBvc1giLCJwb3NZIiwid2lkdGgiLCJoZWlnaHQiLCJhY3RpdmUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInNyYyIsInN0eWxlIiwicG9zaXRpb24iLCJ6SW5kZXgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInZpc2liaWxpdHkiLCJTZXRYUG9zIiwiU2V0WVBvcyIsIk1vdmUiLCJTdGFydCIsIktpbGwiLCJTaGlwIiwiZGlyZWN0aW9uIiwiQWxpZW4iLCJ2aWV3UG9ydCIsImV4cGxvc2lvbkltYWdlVVJMcyIsImN1cnJlbnREaXJlY3Rpb24iLCJEaXJlY3Rpb24iLCJSaWdodCIsIkxlZnQiLCJfdGhpcyIsImxlbmd0aCIsImV4cGxvc2lvbkluZGV4IiwiaW5kZXgiLCJzZXRUaW1lb3V0IiwiZXhwbG9zaW9uSW1hZ2UiLCJyZW1vdmVDaGlsZCIsIkFsaWVuXzEiLCJTaGlwXzEiLCJSb2NrZXRfMSIsIkdhbWVfMSIsIkdhbWUiLCJ2aWV3UG9ydEVsZW1lbnRJZCIsInZpZXdQb3J0SGVpZ2h0Iiwidmlld1BvcnRXaWR0aCIsInNoaXAiLCJyb2NrZXQiLCJhbGllbnMiLCJsYmxTY29yZSIsInNjb3JlIiwiZ2V0RWxlbWVudEJ5SWQiLCJJbml0aWF0ZUJhdHRsZWZpZWxkIiwiSW5pdGlhdGVFdmVudHMiLCJ0b1N0cmluZyIsImxlZnQiLCJkb2N1bWVudEVsZW1lbnQiLCJ0b3AiLCJiYWNrZ3JvdW5kQ29sb3IiLCJBcnJheSIsImluZGV4WSIsImFsaWVuIiwiTWF0aCIsIm1heCIsInB1c2giLCJzZXRJbnRlcnZhbCIsInJvY2tldFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJhbGllblJlY3QiLCJyaWdodCIsImJvdHRvbSIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5RXZlbnQiLCJrZXlDb2RlIiwid2luZG93IiwiS2V5Q29kZXMiLCJMZWZ0QXJyb3ciLCJSaWdodEFycm93IiwiU3BhY2VCYXIiLCJlbGVtZW50IiwibGlzdGVuZXIiLCJhdHRhY2hFdmVudCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLEdBSUEzQixJQUFBNEIsRUFBQSxrQ0NsRUExQixFQUFBb0IsWUFBQSxFQUNBLElBQUFPLEVBQUEsV0FDQSxTQUFBQSxFQUFBQyxFQUFBQyxHQUNBQyxLQUFBQyxNQUFBLEtBQ0FELEtBQUFFLEtBQUEsRUFDQUYsS0FBQUcsS0FBQSxFQUNBSCxLQUFBSSxNQUFBLEVBQ0FKLEtBQUFLLE9BQUEsRUFDQUwsS0FBQU0sUUFBQSxFQUNBTixLQUFBQyxNQUFBTSxTQUFBQyxjQUFBLE9BQ0FULEVBQUFVLFlBQUFULEtBQUFDLE9BQ0FELEtBQUFDLE1BQUFTLElBQUFaLEVBQ0FFLEtBQUFDLE1BQUFVLE1BQUFDLFNBQUEsV0FDQVosS0FBQUMsTUFBQVUsTUFBQUUsT0FBQSxNQUNBYixLQUFBSSxNQUFBSixLQUFBQyxNQUFBYSxZQUNBZCxLQUFBSyxPQUFBTCxLQUFBQyxNQUFBYyxhQUNBZixLQUFBQyxNQUFBVSxNQUFBSyxXQUFBLFNBNkJBLE9BM0JBbkIsRUFBQUosVUFBQXdCLFFBQUEsU0FBQWYsR0FDQUYsS0FBQUUsUUFFQUwsRUFBQUosVUFBQXlCLFFBQUEsU0FBQWYsR0FDQUgsS0FBQUcsUUFFQU4sRUFBQUosVUFBQTBCLEtBQUEsV0FDQW5CLEtBQUFNLFNBQ0FOLEtBQUFHLE1BQUEsRUFDQUgsS0FBQUcsTUFBQSxJQUNBSCxLQUFBQyxNQUFBVSxNQUFBSyxXQUFBLFNBQ0FoQixLQUFBTSxRQUFBLEtBTUFULEVBQUFKLFVBQUEyQixNQUFBLFNBQUFsQixFQUFBQyxHQUNBSCxLQUFBaUIsUUFBQWYsR0FDQUYsS0FBQWtCLFFBQUFmLEdBQ0FILEtBQUFDLE1BQUFVLE1BQUFLLFdBQUEsVUFDQWhCLEtBQUFNLFFBQUEsR0FFQVQsRUFBQUosVUFBQTRCLEtBQUEsV0FDQXJCLEtBQUFDLE1BQUFVLE1BQUFLLFdBQUEsU0FDQWhCLEtBQUFNLFFBQUEsR0FFQVQsRUE1Q0EsR0E4Q0EzQixFQUFBMkIsdUNDL0NBM0IsRUFBQW9CLFlBQUEsRUFDQSxJQUFBZ0MsRUFBQSxXQUNBLFNBQUFBLEVBQUF4QixFQUFBQyxHQUNBQyxLQUFBQyxNQUFBLEtBQ0FELEtBQUFFLEtBQUEsRUFDQUYsS0FBQUcsS0FBQSxFQUNBSCxLQUFBSSxNQUFBLEVBQ0FKLEtBQUFLLE9BQUEsRUFDQUwsS0FBQUMsTUFBQU0sU0FBQUMsY0FBQSxPQUNBVCxFQUFBVSxZQUFBVCxLQUFBQyxPQUNBRCxLQUFBQyxNQUFBUyxJQUFBWixFQUNBRSxLQUFBQyxNQUFBVSxNQUFBQyxTQUFBLFdBQ0FaLEtBQUFDLE1BQUFVLE1BQUFFLE9BQUEsT0FDQWIsS0FBQUksTUFBQUosS0FBQUMsTUFBQWEsWUFDQWQsS0FBQUssT0FBQUwsS0FBQUMsTUFBQWMsYUFZQSxPQVZBTyxFQUFBN0IsVUFBQXdCLFFBQUEsU0FBQWYsR0FDQUYsS0FBQUUsUUFFQW9CLEVBQUE3QixVQUFBeUIsUUFBQSxTQUFBZixHQUNBSCxLQUFBRyxRQUVBbUIsRUFBQTdCLFVBQUEwQixLQUFBLFNBQUFJLEdBQ0F2QixLQUFBaUIsUUFBQWpCLEtBQUFFLEtBQUEsR0FDQUYsS0FBQWlCLFFBQUFqQixLQUFBRSxLQUFBLElBRUFvQixFQXpCQSxHQTJCQXBELEVBQUFvRCxxQ0M1QkFwRCxFQUFBb0IsWUFBQSxFQUNBLElBQUFrQyxFQUFBLFdBQ0EsU0FBQUEsRUFBQTFCLEVBQUEyQixFQUFBQyxHQUNBMUIsS0FBQUMsTUFBQSxLQUNBRCxLQUFBRSxLQUFBLEVBQ0FGLEtBQUFHLEtBQUEsRUFDQUgsS0FBQUksTUFBQSxFQUNBSixLQUFBSyxPQUFBLEVBQ0FMLEtBQUEyQixpQkFBQUgsRUFBQUksVUFBQUMsTUFDQTdCLEtBQUFNLFFBQUEsRUFDQU4sS0FBQXlCLFdBQ0F6QixLQUFBQyxNQUFBTSxTQUFBQyxjQUFBLE9BQ0FSLEtBQUF5QixTQUFBaEIsWUFBQVQsS0FBQUMsT0FDQUQsS0FBQUMsTUFBQVMsSUFBQVosRUFDQUUsS0FBQUMsTUFBQVUsTUFBQUMsU0FBQSxXQUNBWixLQUFBQyxNQUFBVSxNQUFBRSxPQUFBLE1BQ0FiLEtBQUFJLE1BQUFKLEtBQUFDLE1BQUFHLE1BQ0FKLEtBQUFLLE9BQUFMLEtBQUFDLE1BQUFJLE9BQ0FMLEtBQUEwQixxQkFxREEsT0FuREFGLEVBQUEvQixVQUFBd0IsUUFBQSxTQUFBZixHQUNBRixLQUFBRSxRQUVBc0IsRUFBQS9CLFVBQUF5QixRQUFBLFNBQUFmLEdBQ0FILEtBQUFHLFFBRUFxQixFQUFBL0IsVUFBQTBCLEtBQUEsV0FDQW5CLEtBQUFNLFNBQ0FOLEtBQUFFLE1BQUEsR0FDQUYsS0FBQTJCLGlCQUFBSCxFQUFBSSxVQUFBQyxNQUNBN0IsS0FBQWtCLFFBQUFsQixLQUFBRyxLQUFBLEtBRUFILEtBQUFFLEtBQUFGLEtBQUFJLE9BQUFKLEtBQUFDLE1BQUFGLGNBQUFlLGNBQ0FkLEtBQUEyQixpQkFBQUgsRUFBQUksVUFBQUUsS0FDQTlCLEtBQUFrQixRQUFBbEIsS0FBQUcsS0FBQSxLQUVBSCxLQUFBMkIsa0JBQUFILEVBQUFJLFVBQUFDLE1BQ0E3QixLQUFBaUIsUUFBQWpCLEtBQUFFLEtBQUEsR0FFQUYsS0FBQWlCLFFBQUFqQixLQUFBRSxLQUFBLEtBR0FzQixFQUFBL0IsVUFBQTJCLE1BQUEsU0FBQWxCLEVBQUFDLEdBQ0FILEtBQUFpQixRQUFBZixHQUNBRixLQUFBa0IsUUFBQWYsR0FDQUgsS0FBQUMsTUFBQVUsTUFBQUssV0FBQSxVQUNBaEIsS0FBQU0sUUFBQSxHQUVBa0IsRUFBQS9CLFVBQUE0QixLQUFBLFdBQ0EsSUFBQVUsRUFBQS9CLEtBR0EsR0FGQUEsS0FBQUMsTUFBQVUsTUFBQUssV0FBQSxTQUNBaEIsS0FBQU0sUUFBQSxFQUNBTixLQUFBMEIsbUJBQUFNLE9BQUEsR0FDQWhDLEtBQUFpQyxlQUFBLEVBQ0EsUUFBQUMsRUFBQSxFQUErQkEsRUFBQWxDLEtBQUEwQixtQkFBQU0sT0FBd0NFLElBQ3ZFQyxXQUFBLFdBQ0FKLEVBQUFLLGlCQUNBTCxFQUFBSyxlQUFBN0IsU0FBQUMsY0FBQSxPQUNBdUIsRUFBQU4sU0FBQWhCLFlBQUFzQixFQUFBSyxnQkFDQUwsRUFBQUssZUFBQXpCLE1BQUFDLFNBQUEsV0FDQW1CLEVBQUFLLGVBQUF6QixNQUFBRSxPQUFBLFFBRUFrQixFQUFBSyxlQUFBMUIsSUFBQXFCLEVBQUFMLG1CQUFBSyxFQUFBRSxtQkFDaUIsSUFBQUMsR0FFakJDLFdBQUEsV0FDQUosRUFBQU4sU0FBQVksWUFBQU4sRUFBQUssaUJBQ2EsSUFBQXBDLEtBQUEwQixtQkFBQU0sVUFHYlIsRUFBQUksV0FBdUJFLEtBQUEsRUFBQUQsTUFBQSxHQUN2QkwsRUF0RUEsR0F3RUF0RCxFQUFBc0Qsc0NDekVBdEQsRUFBQW9CLFlBQUEsRUFDQSxJQUFBZ0QsRUFBQXRFLEVBQUEsR0FDQXVFLEVBQUF2RSxFQUFBLEdBQ0F3RSxFQUFBeEUsRUFBQSxJQUVBLFNBQUF5RSxHQUNBLElBQUFDLEVBQUEsV0FDQSxTQUFBQSxFQUFBQyxHQUNBM0MsS0FBQTRDLGVBQUEsSUFDQTVDLEtBQUE2QyxjQUFBLElBQ0E3QyxLQUFBeUIsU0FBQSxLQUNBekIsS0FBQThDLEtBQUEsS0FDQTlDLEtBQUErQyxPQUFBLEtBQ0EvQyxLQUFBZ0QsT0FBQSxLQUNBaEQsS0FBQWlELFNBQUEsS0FDQWpELEtBQUFrRCxNQUFBLEVBQ0FsRCxLQUFBeUIsU0FBQWxCLFNBQUE0QyxlQUFBUixHQUNBM0MsS0FBQW9ELHNCQUNBcEQsS0FBQXFELGlCQTZFQSxPQTNFQVgsRUFBQWpELFVBQUEyRCxvQkFBQSxXQUNBcEQsS0FBQXlCLFNBQUFkLE1BQUFDLFNBQUEsV0FDQVosS0FBQXlCLFNBQUFkLE1BQUFQLE1BQUFKLEtBQUE2QyxjQUFBUyxXQUFBLEtBQ0F0RCxLQUFBeUIsU0FBQWQsTUFBQU4sT0FBQUwsS0FBQTRDLGVBQUFVLFdBQUEsS0FDQXRELEtBQUF5QixTQUFBZCxNQUFBNEMsT0FBQWhELFNBQUFpRCxnQkFBQTFDLFlBQUFkLEtBQUE2QyxlQUFBLEdBQUFTLFdBQUEsS0FDQXRELEtBQUF5QixTQUFBZCxNQUFBOEMsTUFBQWxELFNBQUFpRCxnQkFBQXpDLGFBQUFmLEtBQUE0QyxnQkFBQSxHQUFBVSxXQUFBLEtBQ0F0RCxLQUFBeUIsU0FBQWQsTUFBQStDLGdCQUFBLFFBQ0ExRCxLQUFBOEMsS0FBQSxJQUFBUCxFQUFBakIsS0FBQSxtQkFBQXRCLEtBQUF5QixVQUNBekIsS0FBQThDLEtBQUE3QixRQUFBakIsS0FBQTZDLGNBQUEsR0FDQTdDLEtBQUE4QyxLQUFBNUIsUUFBQWxCLEtBQUE0QyxlQUFBNUMsS0FBQThDLEtBQUE3QyxNQUFBSSxRQUNBTCxLQUFBK0MsT0FBQSxJQUFBUCxFQUFBM0MsT0FBQSxvQkFBQUcsS0FBQXlCLFVBQ0F6QixLQUFBZ0QsT0FBQSxJQUFBVyxNQUNBLFFBQUFDLEVBQUEsRUFBZ0NBLEVBQUEsRUFBWUEsSUFDNUMsUUFBQTFCLEVBQUEsRUFBbUNBLEVBQUEsR0FBWUEsSUFBQSxDQUMvQyxJQUFBMkIsRUFBQSxJQUFBdkIsRUFBQWQsTUFBQSxxQkFBQXhCLEtBQUF5QixVQUFBLHNGQUNBb0MsRUFBQXpDLE1BQUEwQyxLQUFBQyxLQUFBRixFQUFBekQsTUFBQSxJQUFBOEIsRUFBQSxHQUFBNEIsS0FBQUMsS0FBQUYsRUFBQXhELE9BQUEsSUFBQXVELEVBQUEsSUFDQUMsRUFBQWxDLGlCQUFBVyxFQUFBZCxNQUFBSSxVQUFBQyxNQUNBN0IsS0FBQWdELE9BQUFnQixLQUFBSCxLQUlBbkIsRUFBQWpELFVBQUE0RCxlQUFBLFdBQ0EsSUFBQXRCLEVBQUEvQixLQUNBaUUsWUFBQSxXQUdBLEdBRkFsQyxFQUFBZ0IsT0FBQXpDLFFBQ0F5QixFQUFBZ0IsT0FBQTVCLE9BQ0FZLEVBQUFnQixPQUFBekMsT0FFQSxJQURBLElBQUE0RCxFQUFBbkMsRUFBQWdCLE9BQUE5QyxNQUFBa0Usd0JBQ0FqQyxFQUFBLEVBQXVDQSxFQUFBSCxFQUFBaUIsT0FBQWhCLE9BQTZCRSxJQUNwRSxHQUFBSCxFQUFBaUIsT0FBQWQsR0FBQTVCLE9BQUEsQ0FDQSxJQUFBOEQsRUFBQXJDLEVBQUFpQixPQUFBZCxHQUFBakMsTUFBQWtFLHdCQUNBRCxFQUFBRyxNQUFBRCxFQUFBYixNQUFBVyxFQUFBWCxLQUFBYSxFQUFBQyxPQUFBSCxFQUFBSSxPQUFBRixFQUFBWCxLQUFBUyxFQUFBVCxJQUFBVyxFQUFBRSxTQUNBdkMsRUFBQWlCLE9BQUFkLEdBQUFiLE9BQ0FVLEVBQUFnQixPQUFBMUIsT0FDQVUsRUFBQW1CLE9BQUEsSUFDQW5CLEVBQUFrQixTQUFBc0IsWUFBQXhDLEVBQUFtQixNQUFBSSxjQUthLEdBQ2JXLFlBQUEsV0FDQSxRQUFBL0IsRUFBQSxFQUFtQ0EsRUFBQUgsRUFBQWlCLE9BQUFoQixPQUE2QkUsSUFDaEVILEVBQUFpQixPQUFBZCxHQUFBNUIsUUFDQXlCLEVBQUFpQixPQUFBZCxHQUFBZixRQUNhLEdBQ2JuQixLQUFBd0UsaUJBQUFqRSxTQUFBLG1CQUFBa0UsR0FDQSxJQUFBQyxFQUFBRCxFQUNBRSxFQUFBLEVBQ0EsR0FBQUQsS0FBQUMsUUFDQUEsRUFBQUQsRUFBQUMsYUFDQSxHQUFBQyxPQUFBSCxPQUFBRyxPQUFBSCxPQUNBRSxFQUNBLE9BQUFBLEdBQ0EsS0FBQWpDLEVBQUFtQyxTQUFBQyxVQUNBLEtBQUFwQyxFQUFBbUMsU0FBQUUsV0FDQWhELEVBQUFlLEtBQUEzQixLQUFBd0QsR0FDQSxNQUNBLEtBQUFqQyxFQUFBbUMsU0FBQUcsU0FDQWpELEVBQUFnQixPQUFBekMsT0FDQXlCLEVBQUFnQixPQUFBNUIsT0FFQVksRUFBQWdCLE9BQUEzQixNQUFBVyxFQUFBZSxLQUFBNUMsS0FBQTZCLEVBQUFlLEtBQUExQyxNQUFBLEVBQUEyQixFQUFBZSxLQUFBM0MsVUFNQXVDLEVBQUFqRCxVQUFBK0UsaUJBQUEsU0FBQVMsRUFBQVIsRUFBQVMsR0FDQUQsRUFBQVQsaUJBQ0FTLEVBQUFULGlCQUFBQyxFQUFBUyxHQUNBRCxFQUFBRSxhQUNBRixFQUFBRSxZQUFBVixFQUFBUyxJQUVBeEMsRUFBQW1DLFVBQXlCQyxVQUFBLEdBQUFDLFdBQUEsR0FBQUMsU0FBQSxJQUN6QnRDLEVBekZBLEdBMkZBRCxFQUFBQyxPQTVGQSxDQTZGQ3hFLEVBQUF3RSxPQUFBeEUsRUFBQXdFIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgUm9ja2V0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb2NrZXQoaW1hZ2VVUkwsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zWCA9IDA7XG4gICAgICAgIHRoaXMucG9zWSA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmltYWdlKTtcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBpbWFnZVVSTDtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUuekluZGV4ID0gJzk5OSc7XG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmltYWdlLmNsaWVudFdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuaW1hZ2UuY2xpZW50SGVpZ2h0O1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9XG4gICAgUm9ja2V0LnByb3RvdHlwZS5TZXRYUG9zID0gZnVuY3Rpb24gKHBvc1gpIHtcbiAgICAgICAgdGhpcy5wb3NYID0gcG9zWDtcbiAgICB9O1xuICAgIFJvY2tldC5wcm90b3R5cGUuU2V0WVBvcyA9IGZ1bmN0aW9uIChwb3NZKSB7XG4gICAgICAgIHRoaXMucG9zWSA9IHBvc1k7XG4gICAgfTtcbiAgICBSb2NrZXQucHJvdG90eXBlLk1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5wb3NZIC09IDU7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NZIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUm9ja2V0LnByb3RvdHlwZS5TdGFydCA9IGZ1bmN0aW9uIChwb3NYLCBwb3NZKSB7XG4gICAgICAgIHRoaXMuU2V0WFBvcyhwb3NYKTtcbiAgICAgICAgdGhpcy5TZXRZUG9zKHBvc1kpO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICB9O1xuICAgIFJvY2tldC5wcm90b3R5cGUuS2lsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgfTtcbiAgICByZXR1cm4gUm9ja2V0O1xufSgpKTtcbmV4cG9ydHMuUm9ja2V0ID0gUm9ja2V0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIFNoaXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNoaXAoaW1hZ2VVUkwsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zWCA9IDA7XG4gICAgICAgIHRoaXMucG9zWSA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmltYWdlKTtcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBpbWFnZVVSTDtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUuekluZGV4ID0gJzEwMDAnO1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5pbWFnZS5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmltYWdlLmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgU2hpcC5wcm90b3R5cGUuU2V0WFBvcyA9IGZ1bmN0aW9uIChwb3NYKSB7XG4gICAgICAgIHRoaXMucG9zWCA9IHBvc1g7XG4gICAgfTtcbiAgICBTaGlwLnByb3RvdHlwZS5TZXRZUG9zID0gZnVuY3Rpb24gKHBvc1kpIHtcbiAgICAgICAgdGhpcy5wb3NZID0gcG9zWTtcbiAgICB9O1xuICAgIFNoaXAucHJvdG90eXBlLk1vdmUgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuU2V0WFBvcyh0aGlzLnBvc1ggLSA4KTtcbiAgICAgICAgdGhpcy5TZXRYUG9zKHRoaXMucG9zWCArIDgpO1xuICAgIH07XG4gICAgcmV0dXJuIFNoaXA7XG59KCkpO1xuZXhwb3J0cy5TaGlwID0gU2hpcDtcbiIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBBbGllbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWxpZW4oaW1hZ2VVUkwsIHZpZXdQb3J0LCBleHBsb3Npb25JbWFnZVVSTHMpIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zWCA9IDA7XG4gICAgICAgIHRoaXMucG9zWSA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IEFsaWVuLkRpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3UG9ydCA9IHZpZXdQb3J0O1xuICAgICAgICB0aGlzLmltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIHRoaXMudmlld1BvcnQuYXBwZW5kQ2hpbGQodGhpcy5pbWFnZSk7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2VVUkw7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnpJbmRleCA9ICc5OTknO1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5pbWFnZS53aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmltYWdlLmhlaWdodDtcbiAgICAgICAgdGhpcy5leHBsb3Npb25JbWFnZVVSTHMgPSBleHBsb3Npb25JbWFnZVVSTHM7XG4gICAgfVxuICAgIEFsaWVuLnByb3RvdHlwZS5TZXRYUG9zID0gZnVuY3Rpb24gKHBvc1gpIHtcbiAgICAgICAgdGhpcy5wb3NYID0gcG9zWDtcbiAgICB9O1xuICAgIEFsaWVuLnByb3RvdHlwZS5TZXRZUG9zID0gZnVuY3Rpb24gKHBvc1kpIHtcbiAgICAgICAgdGhpcy5wb3NZID0gcG9zWTtcbiAgICB9O1xuICAgIEFsaWVuLnByb3RvdHlwZS5Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvc1ggPD0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudERpcmVjdGlvbiA9IEFsaWVuLkRpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLlNldFlQb3ModGhpcy5wb3NZICsgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wb3NYICsgdGhpcy53aWR0aCA+PSB0aGlzLmltYWdlLnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREaXJlY3Rpb24gPSBBbGllbi5EaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgICAgICAgICB0aGlzLlNldFlQb3ModGhpcy5wb3NZICsgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudERpcmVjdGlvbiA9PSBBbGllbi5EaXJlY3Rpb24uUmlnaHQpXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRYUG9zKHRoaXMucG9zWCArIDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuU2V0WFBvcyh0aGlzLnBvc1ggLSAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQWxpZW4ucHJvdG90eXBlLlN0YXJ0ID0gZnVuY3Rpb24gKHBvc1gsIHBvc1kpIHtcbiAgICAgICAgdGhpcy5TZXRYUG9zKHBvc1gpO1xuICAgICAgICB0aGlzLlNldFlQb3MocG9zWSk7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgIH07XG4gICAgQWxpZW4ucHJvdG90eXBlLktpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5leHBsb3Npb25JbWFnZVVSTHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5leHBsb3Npb25JbmRleCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5leHBsb3Npb25JbWFnZVVSTHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuZXhwbG9zaW9uSW1hZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGxvc2lvbkltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52aWV3UG9ydC5hcHBlbmRDaGlsZChfdGhpcy5leHBsb3Npb25JbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBsb3Npb25JbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBsb3Npb25JbWFnZS5zdHlsZS56SW5kZXggPSAnOTk5OSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwbG9zaW9uSW1hZ2Uuc3JjID0gX3RoaXMuZXhwbG9zaW9uSW1hZ2VVUkxzW190aGlzLmV4cGxvc2lvbkluZGV4KytdO1xuICAgICAgICAgICAgICAgIH0sIGluZGV4ICogMjAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnZpZXdQb3J0LnJlbW92ZUNoaWxkKF90aGlzLmV4cGxvc2lvbkltYWdlKTtcbiAgICAgICAgICAgIH0sIHRoaXMuZXhwbG9zaW9uSW1hZ2VVUkxzLmxlbmd0aCAqIDIwMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFsaWVuLkRpcmVjdGlvbiA9IHsgTGVmdDogMSwgUmlnaHQ6IDIgfTtcbiAgICByZXR1cm4gQWxpZW47XG59KCkpO1xuZXhwb3J0cy5BbGllbiA9IEFsaWVuO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIEFsaWVuXzEgPSByZXF1aXJlKFwiLi9BbGllblwiKTtcbnZhciBTaGlwXzEgPSByZXF1aXJlKFwiLi9TaGlwXCIpO1xudmFyIFJvY2tldF8xID0gcmVxdWlyZShcIi4vUm9ja2V0XCIpO1xudmFyIEdhbWU7XG4oZnVuY3Rpb24gKEdhbWVfMSkge1xuICAgIHZhciBHYW1lID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gR2FtZSh2aWV3UG9ydEVsZW1lbnRJZCkge1xuICAgICAgICAgICAgdGhpcy52aWV3UG9ydEhlaWdodCA9IDYwMDtcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnRXaWR0aCA9IDgwMDtcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zaGlwID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucm9ja2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYWxpZW5zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGJsU2NvcmUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodmlld1BvcnRFbGVtZW50SWQpO1xuICAgICAgICAgICAgdGhpcy5Jbml0aWF0ZUJhdHRsZWZpZWxkKCk7XG4gICAgICAgICAgICB0aGlzLkluaXRpYXRlRXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgR2FtZS5wcm90b3R5cGUuSW5pdGlhdGVCYXR0bGVmaWVsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgdGhpcy52aWV3UG9ydC5zdHlsZS53aWR0aCA9IHRoaXMudmlld1BvcnRXaWR0aC50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy52aWV3UG9ydEhlaWdodC50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUubGVmdCA9ICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC0gdGhpcy52aWV3UG9ydFdpZHRoKSAvIDIpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy52aWV3UG9ydC5zdHlsZS50b3AgPSAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSB0aGlzLnZpZXdQb3J0SGVpZ2h0KSAvIDIpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy52aWV3UG9ydC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnQmxhY2snO1xuICAgICAgICAgICAgdGhpcy5zaGlwID0gbmV3IFNoaXBfMS5TaGlwKCdJbWFnZXMvQWxpZW4ucG5nJywgdGhpcy52aWV3UG9ydCk7XG4gICAgICAgICAgICB0aGlzLnNoaXAuU2V0WFBvcyh0aGlzLnZpZXdQb3J0V2lkdGggLyAyKTtcbiAgICAgICAgICAgIHRoaXMuc2hpcC5TZXRZUG9zKHRoaXMudmlld1BvcnRIZWlnaHQgLSB0aGlzLnNoaXAuaW1hZ2UuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMucm9ja2V0ID0gbmV3IFJvY2tldF8xLlJvY2tldCgnSW1hZ2VzL1JvY2tldC5wbmcnLCB0aGlzLnZpZXdQb3J0KTtcbiAgICAgICAgICAgIHRoaXMuYWxpZW5zID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleFkgPSAwOyBpbmRleFkgPCAyOyBpbmRleFkrKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCAxMDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxpZW4gPSBuZXcgQWxpZW5fMS5BbGllbignSW1hZ2VzL0ludmFkZXIucG5nJywgdGhpcy52aWV3UG9ydCwgWydJbWFnZXMvQmxvd3VwMS5wbmcnLCAnSW1hZ2VzL0Jsb3d1cDIucG5nJywgJ0ltYWdlcy9CbG93dXAzLnBuZycsICdJbWFnZXMvQmxvd3VwNC5wbmcnXSk7XG4gICAgICAgICAgICAgICAgICAgIGFsaWVuLlN0YXJ0KE1hdGgubWF4KChhbGllbi53aWR0aCArIDIwKSAqIGluZGV4LCAxKSwgTWF0aC5tYXgoKGFsaWVuLmhlaWdodCArIDE1KSAqIGluZGV4WSwgMSkpO1xuICAgICAgICAgICAgICAgICAgICBhbGllbi5jdXJyZW50RGlyZWN0aW9uID0gQWxpZW5fMS5BbGllbi5EaXJlY3Rpb24uUmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxpZW5zLnB1c2goYWxpZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgR2FtZS5wcm90b3R5cGUuSW5pdGlhdGVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5yb2NrZXQuYWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2NrZXQuTW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5yb2NrZXQuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb2NrZXRSZWN0ID0gX3RoaXMucm9ja2V0LmltYWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX3RoaXMuYWxpZW5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmFsaWVuc1tpbmRleF0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsaWVuUmVjdCA9IF90aGlzLmFsaWVuc1tpbmRleF0uaW1hZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocm9ja2V0UmVjdC5yaWdodCA8IGFsaWVuUmVjdC5sZWZ0IHx8IHJvY2tldFJlY3QubGVmdCA+IGFsaWVuUmVjdC5yaWdodCB8fCByb2NrZXRSZWN0LmJvdHRvbSA8IGFsaWVuUmVjdC50b3AgfHwgcm9ja2V0UmVjdC50b3AgPiBhbGllblJlY3QuYm90dG9tKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbGllbnNbaW5kZXhdLktpbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9ja2V0LktpbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2NvcmUgKz0gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGJsU2NvcmUudGV4dENvbnRlbnQgPSBfdGhpcy5zY29yZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBfdGhpcy5hbGllbnMubGVuZ3RoOyBpbmRleCsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYWxpZW5zW2luZGV4XS5hY3RpdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbGllbnNbaW5kZXhdLk1vdmUoKTtcbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoa2V5RXZlbnQgJiYga2V5RXZlbnQua2V5Q29kZSlcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9IGtleUV2ZW50LmtleUNvZGU7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAod2luZG93LmV2ZW50ICYmIHdpbmRvdy5ldmVudClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgR2FtZS5LZXlDb2Rlcy5MZWZ0QXJyb3c6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHYW1lLktleUNvZGVzLlJpZ2h0QXJyb3c6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNoaXAuTW92ZShrZXlDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHYW1lLktleUNvZGVzLlNwYWNlQmFyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucm9ja2V0LmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvY2tldC5Nb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvY2tldC5TdGFydChfdGhpcy5zaGlwLnBvc1ggKyAoX3RoaXMuc2hpcC53aWR0aCAvIDIpLCBfdGhpcy5zaGlwLnBvc1kpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIEdhbWUucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5hdHRhY2hFdmVudClcbiAgICAgICAgICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIH07XG4gICAgICAgIEdhbWUuS2V5Q29kZXMgPSB7IExlZnRBcnJvdzogMzcsIFJpZ2h0QXJyb3c6IDM5LCBTcGFjZUJhcjogMzIgfTtcbiAgICAgICAgcmV0dXJuIEdhbWU7XG4gICAgfSgpKTtcbiAgICBHYW1lXzEuR2FtZSA9IEdhbWU7XG59KShHYW1lID0gZXhwb3J0cy5HYW1lIHx8IChleHBvcnRzLkdhbWUgPSB7fSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==