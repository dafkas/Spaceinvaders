!function(t){var i={};function e(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=3)}([function(t,i,e){"use strict";i.__esModule=!0;var s=function(){function t(t,i){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.active=!1,this.image=document.createElement("img"),i.appendChild(this.image),this.image.src=t,this.image.style.position="absolute",this.image.style.zIndex="999",this.width=this.image.clientWidth,this.height=this.image.clientHeight,this.image.style.visibility="hidden"}return t.prototype.SetXPos=function(t){this.posX=t},t.prototype.SetYPos=function(t){this.posY=t},t.prototype.Move=function(){this.active&&(this.posY-=5,this.posY<=0&&(this.image.style.visibility="hidden",this.active=!1))},t.prototype.Start=function(t,i){this.SetXPos(t),this.SetYPos(i),this.image.style.visibility="visible",this.active=!0},t.prototype.Kill=function(){this.image.style.visibility="hidden",this.active=!1},t}();i.Rocket=s},function(t,i,e){"use strict";i.__esModule=!0;var s=e(3),o=function(){function t(t,i){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.image=document.createElement("img"),i.appendChild(this.image),this.image.src=t,this.image.style.position="absolute",this.image.style.zIndex="1000",this.width=this.image.clientWidth,this.height=this.image.clientHeight}return t.prototype.SetXPos=function(t){this.posX=t,console.log(this)},t.prototype.SetYPos=function(t){this.posY=t,console.log(this)},t.prototype.Move=function(t){console.log(s.Game),this.SetXPos(this.posX-8),this.SetXPos(this.posX+8)},t}();i.Ship=o},function(t,i,e){"use strict";i.__esModule=!0;var s=function(){function t(i,e,s){this.image=null,this.posX=0,this.posY=0,this.width=0,this.height=0,this.currentDirection=t.Direction.Right,this.active=!1,this.viewPort=e,this.image=document.createElement("img"),this.viewPort.appendChild(this.image),this.image.src=i,this.image.style.position="absolute",this.image.style.zIndex="999",this.width=this.image.width,this.height=this.image.height,this.explosionImageURLs=s}return t.prototype.SetXPos=function(t){this.posX=t},t.prototype.SetYPos=function(t){this.posY=t},t.prototype.Move=function(){this.active&&(this.posX<=0?(this.currentDirection=t.Direction.Right,this.SetYPos(this.posY+10)):this.posX+this.width>=this.image.parentElement.clientWidth&&(this.currentDirection=t.Direction.Left,this.SetYPos(this.posY+10)),this.currentDirection==t.Direction.Right?this.SetXPos(this.posX+1):this.SetXPos(this.posX-1))},t.prototype.Start=function(t,i){this.SetXPos(t),this.SetYPos(i),this.image.style.visibility="visible",this.active=!0},t.prototype.Kill=function(){var t=this;if(this.image.style.visibility="hidden",this.active=!1,this.explosionImageURLs.length>0){this.explosionIndex=0;for(var i=0;i<this.explosionImageURLs.length;i++)setTimeout(function(){t.explosionImage||(t.explosionImage=document.createElement("img"),t.viewPort.appendChild(t.explosionImage),t.explosionImage.style.position="absolute",t.explosionImage.style.zIndex="9999"),t.explosionImage.src=t.explosionImageURLs[t.explosionIndex++]},200*i);setTimeout(function(){t.viewPort.removeChild(t.explosionImage)},200*this.explosionImageURLs.length)}},t.Direction={Left:1,Right:2},t}();i.Alien=s},function(t,i,e){"use strict";i.__esModule=!0;var s=e(2),o=e(1),n=e(0);!function(t){var i=function(){function t(t){this.viewPortHeight=600,this.viewPortWidth=800,this.viewPort=null,this.ship=null,this.rocket=null,this.aliens=null,this.lblScore=null,this.score=0,this.viewPort=document.getElementById(t),this.InitiateBattlefield(),this.InitiateEvents()}return t.prototype.InitiateBattlefield=function(){this.viewPort.style.position="absolute",this.viewPort.style.width=this.viewPortWidth.toString()+"px",this.viewPort.style.height=this.viewPortHeight.toString()+"px",this.viewPort.style.left=((document.documentElement.clientWidth-this.viewPortWidth)/2).toString()+"px",this.viewPort.style.top=((document.documentElement.clientHeight-this.viewPortHeight)/2).toString()+"px",this.viewPort.style.backgroundColor="Black",this.ship=new o.Ship("Images/Alien.png",this.viewPort),this.ship.SetXPos(this.viewPortWidth/2),this.ship.SetYPos(this.viewPortHeight-this.ship.image.height),this.rocket=new n.Rocket("Images/Rocket.png",this.viewPort),this.aliens=new Array;for(var t=0;t<2;t++)for(var i=0;i<10;i++){var e=new s.Alien("Images/Invader.png",this.viewPort,["Images/Blowup1.png","Images/Blowup2.png","Images/Blowup3.png","Images/Blowup4.png"]);e.Start(Math.max((e.width+20)*i,1),Math.max((e.height+15)*t,1)),e.currentDirection=s.Alien.Direction.Right,this.aliens.push(e)}},t.prototype.InitiateEvents=function(){var i=this;setInterval(function(){if(i.rocket.active&&i.rocket.Move(),i.rocket.active)for(var t=i.rocket.image.getBoundingClientRect(),e=0;e<i.aliens.length;e++)if(i.aliens[e].active){var s=i.aliens[e].image.getBoundingClientRect();t.right<s.left||t.left>s.right||t.bottom<s.top||t.top>s.bottom||(i.aliens[e].Kill(),i.rocket.Kill(),i.score+=1e3,i.lblScore.textContent=i.score.toString())}},1),setInterval(function(){for(var t=0;t<i.aliens.length;t++)i.aliens[t].active&&i.aliens[t].Move()},1),this.addEventListener(document,"keydown",function(e){var s=e,o=0;if(s&&s.keyCode)o=s.keyCode;else if(window.event&&window.event&&o)switch(o){case t.KeyCodes.LeftArrow:case t.KeyCodes.RightArrow:i.ship.Move(o);break;case t.KeyCodes.SpaceBar:i.rocket.active?i.rocket.Move():i.rocket.Start(i.ship.posX+i.ship.width/2,i.ship.posY)}})},t.prototype.addEventListener=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent&&t.attachEvent(i,e)},t.KeyCodes={LeftArrow:37,RightArrow:39,SpaceBar:32},t}();t.Game=i}(i.Game||(i.Game={}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGV2L1JvY2tldC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvU2hpcC50cyIsIndlYnBhY2s6Ly8vLi9kZXYvQWxpZW4udHMiLCJ3ZWJwYWNrOi8vLy4vZGV2L0dhbWUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlJvY2tldCIsImltYWdlVVJMIiwicGFyZW50RWxlbWVudCIsInRoaXMiLCJpbWFnZSIsInBvc1giLCJwb3NZIiwid2lkdGgiLCJoZWlnaHQiLCJhY3RpdmUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInNyYyIsInN0eWxlIiwicG9zaXRpb24iLCJ6SW5kZXgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInZpc2liaWxpdHkiLCJTZXRYUG9zIiwiU2V0WVBvcyIsIk1vdmUiLCJTdGFydCIsIktpbGwiLCJHYW1lXzEiLCJTaGlwIiwiY29uc29sZSIsImxvZyIsImRpcmVjdGlvbiIsIkdhbWUiLCJBbGllbiIsInZpZXdQb3J0IiwiZXhwbG9zaW9uSW1hZ2VVUkxzIiwiY3VycmVudERpcmVjdGlvbiIsIkRpcmVjdGlvbiIsIlJpZ2h0IiwiTGVmdCIsIl90aGlzIiwibGVuZ3RoIiwiZXhwbG9zaW9uSW5kZXgiLCJpbmRleCIsInNldFRpbWVvdXQiLCJleHBsb3Npb25JbWFnZSIsInJlbW92ZUNoaWxkIiwiQWxpZW5fMSIsIlNoaXBfMSIsIlJvY2tldF8xIiwidmlld1BvcnRFbGVtZW50SWQiLCJ2aWV3UG9ydEhlaWdodCIsInZpZXdQb3J0V2lkdGgiLCJzaGlwIiwicm9ja2V0IiwiYWxpZW5zIiwibGJsU2NvcmUiLCJzY29yZSIsImdldEVsZW1lbnRCeUlkIiwiSW5pdGlhdGVCYXR0bGVmaWVsZCIsIkluaXRpYXRlRXZlbnRzIiwidG9TdHJpbmciLCJsZWZ0IiwiZG9jdW1lbnRFbGVtZW50IiwidG9wIiwiYmFja2dyb3VuZENvbG9yIiwiQXJyYXkiLCJpbmRleFkiLCJhbGllbiIsIk1hdGgiLCJtYXgiLCJwdXNoIiwic2V0SW50ZXJ2YWwiLCJyb2NrZXRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYWxpZW5SZWN0IiwicmlnaHQiLCJib3R0b20iLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUV2ZW50Iiwia2V5Q29kZSIsIndpbmRvdyIsIktleUNvZGVzIiwiTGVmdEFycm93IiwiUmlnaHRBcnJvdyIsIlNwYWNlQmFyIiwiZWxlbWVudCIsImxpc3RlbmVyIiwiYXR0YWNoRXZlbnQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEs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QUEzQyxPQUNBNkIsRUFBQWMsT0FBQTlCLE9BRUFnQixFQUFBYyxPQUFBN0IsTUFBQWUsRUFBQWEsS0FBQTlDLEtBQUFpQyxFQUFBYSxLQUFBNUMsTUFBQSxFQUFBK0IsRUFBQWEsS0FBQTdDLFVBTUF3QixFQUFBbEMsVUFBQWlGLGlCQUFBLFNBQUFTLEVBQUFSLEVBQUFTLEdBQ0FELEVBQUFULGlCQUNBUyxFQUFBVCxpQkFBQUMsRUFBQVMsR0FDQUQsRUFBQUUsYUFDQUYsRUFBQUUsWUFBQVYsRUFBQVMsSUFFQXpELEVBQUFvRCxVQUF5QkMsVUFBQSxHQUFBQyxXQUFBLEdBQUFDLFNBQUEsSUFDekJ2RCxFQXpGQSxHQTJGQUwsRUFBQUssT0E1RkEsQ0E2RkN6RCxFQUFBeUQsT0FBQXpELEVBQUF5RCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIFJvY2tldCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUm9ja2V0KGltYWdlVVJMLCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLnBvc1ggPSAwO1xuICAgICAgICB0aGlzLnBvc1kgPSAwO1xuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5pbWFnZSk7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2VVUkw7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnpJbmRleCA9ICc5OTknO1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5pbWFnZS5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmltYWdlLmNsaWVudEhlaWdodDtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgfVxuICAgIFJvY2tldC5wcm90b3R5cGUuU2V0WFBvcyA9IGZ1bmN0aW9uIChwb3NYKSB7XG4gICAgICAgIHRoaXMucG9zWCA9IHBvc1g7XG4gICAgfTtcbiAgICBSb2NrZXQucHJvdG90eXBlLlNldFlQb3MgPSBmdW5jdGlvbiAocG9zWSkge1xuICAgICAgICB0aGlzLnBvc1kgPSBwb3NZO1xuICAgIH07XG4gICAgUm9ja2V0LnByb3RvdHlwZS5Nb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMucG9zWSAtPSA1O1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zWSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFJvY2tldC5wcm90b3R5cGUuU3RhcnQgPSBmdW5jdGlvbiAocG9zWCwgcG9zWSkge1xuICAgICAgICB0aGlzLlNldFhQb3MocG9zWCk7XG4gICAgICAgIHRoaXMuU2V0WVBvcyhwb3NZKTtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgfTtcbiAgICBSb2NrZXQucHJvdG90eXBlLktpbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIFJvY2tldDtcbn0oKSk7XG5leHBvcnRzLlJvY2tldCA9IFJvY2tldDtcbiIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBHYW1lXzEgPSByZXF1aXJlKFwiLi9HYW1lXCIpO1xudmFyIFNoaXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNoaXAoaW1hZ2VVUkwsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbWFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zWCA9IDA7XG4gICAgICAgIHRoaXMucG9zWSA9IDA7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmltYWdlKTtcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBpbWFnZVVSTDtcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHRoaXMuaW1hZ2Uuc3R5bGUuekluZGV4ID0gJzEwMDAnO1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5pbWFnZS5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLmltYWdlLmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgU2hpcC5wcm90b3R5cGUuU2V0WFBvcyA9IGZ1bmN0aW9uIChwb3NYKSB7XG4gICAgICAgIHRoaXMucG9zWCA9IHBvc1g7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgIH07XG4gICAgU2hpcC5wcm90b3R5cGUuU2V0WVBvcyA9IGZ1bmN0aW9uIChwb3NZKSB7XG4gICAgICAgIHRoaXMucG9zWSA9IHBvc1k7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgIH07XG4gICAgU2hpcC5wcm90b3R5cGUuTW92ZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coR2FtZV8xLkdhbWUpO1xuICAgICAgICB0aGlzLlNldFhQb3ModGhpcy5wb3NYIC0gOCk7XG4gICAgICAgIHRoaXMuU2V0WFBvcyh0aGlzLnBvc1ggKyA4KTtcbiAgICB9O1xuICAgIHJldHVybiBTaGlwO1xufSgpKTtcbmV4cG9ydHMuU2hpcCA9IFNoaXA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgQWxpZW4gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFsaWVuKGltYWdlVVJMLCB2aWV3UG9ydCwgZXhwbG9zaW9uSW1hZ2VVUkxzKSB7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLnBvc1ggPSAwO1xuICAgICAgICB0aGlzLnBvc1kgPSAwO1xuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnREaXJlY3Rpb24gPSBBbGllbi5EaXJlY3Rpb24uUmlnaHQ7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmlld1BvcnQgPSB2aWV3UG9ydDtcbiAgICAgICAgdGhpcy5pbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICB0aGlzLnZpZXdQb3J0LmFwcGVuZENoaWxkKHRoaXMuaW1hZ2UpO1xuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IGltYWdlVVJMO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgdGhpcy5pbWFnZS5zdHlsZS56SW5kZXggPSAnOTk5JztcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuaW1hZ2Uud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5pbWFnZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2VVUkxzID0gZXhwbG9zaW9uSW1hZ2VVUkxzO1xuICAgIH1cbiAgICBBbGllbi5wcm90b3R5cGUuU2V0WFBvcyA9IGZ1bmN0aW9uIChwb3NYKSB7XG4gICAgICAgIHRoaXMucG9zWCA9IHBvc1g7XG4gICAgfTtcbiAgICBBbGllbi5wcm90b3R5cGUuU2V0WVBvcyA9IGZ1bmN0aW9uIChwb3NZKSB7XG4gICAgICAgIHRoaXMucG9zWSA9IHBvc1k7XG4gICAgfTtcbiAgICBBbGllbi5wcm90b3R5cGUuTW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NYIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREaXJlY3Rpb24gPSBBbGllbi5EaXJlY3Rpb24uUmlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5TZXRZUG9zKHRoaXMucG9zWSArIDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucG9zWCArIHRoaXMud2lkdGggPj0gdGhpcy5pbWFnZS5wYXJlbnRFbGVtZW50LmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGlyZWN0aW9uID0gQWxpZW4uRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5TZXRZUG9zKHRoaXMucG9zWSArIDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnREaXJlY3Rpb24gPT0gQWxpZW4uRGlyZWN0aW9uLlJpZ2h0KVxuICAgICAgICAgICAgICAgIHRoaXMuU2V0WFBvcyh0aGlzLnBvc1ggKyAxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLlNldFhQb3ModGhpcy5wb3NYIC0gMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFsaWVuLnByb3RvdHlwZS5TdGFydCA9IGZ1bmN0aW9uIChwb3NYLCBwb3NZKSB7XG4gICAgICAgIHRoaXMuU2V0WFBvcyhwb3NYKTtcbiAgICAgICAgdGhpcy5TZXRZUG9zKHBvc1kpO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICB9O1xuICAgIEFsaWVuLnByb3RvdHlwZS5LaWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmltYWdlLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZXhwbG9zaW9uSW1hZ2VVUkxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZXhwbG9zaW9uSW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZXhwbG9zaW9uSW1hZ2VVUkxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmV4cGxvc2lvbkltYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBsb3Npb25JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudmlld1BvcnQuYXBwZW5kQ2hpbGQoX3RoaXMuZXhwbG9zaW9uSW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwbG9zaW9uSW1hZ2Uuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwbG9zaW9uSW1hZ2Uuc3R5bGUuekluZGV4ID0gJzk5OTknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGxvc2lvbkltYWdlLnNyYyA9IF90aGlzLmV4cGxvc2lvbkltYWdlVVJMc1tfdGhpcy5leHBsb3Npb25JbmRleCsrXTtcbiAgICAgICAgICAgICAgICB9LCBpbmRleCAqIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy52aWV3UG9ydC5yZW1vdmVDaGlsZChfdGhpcy5leHBsb3Npb25JbWFnZSk7XG4gICAgICAgICAgICB9LCB0aGlzLmV4cGxvc2lvbkltYWdlVVJMcy5sZW5ndGggKiAyMDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbGllbi5EaXJlY3Rpb24gPSB7IExlZnQ6IDEsIFJpZ2h0OiAyIH07XG4gICAgcmV0dXJuIEFsaWVuO1xufSgpKTtcbmV4cG9ydHMuQWxpZW4gPSBBbGllbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBBbGllbl8xID0gcmVxdWlyZShcIi4vQWxpZW5cIik7XG52YXIgU2hpcF8xID0gcmVxdWlyZShcIi4vU2hpcFwiKTtcbnZhciBSb2NrZXRfMSA9IHJlcXVpcmUoXCIuL1JvY2tldFwiKTtcbnZhciBHYW1lO1xuKGZ1bmN0aW9uIChHYW1lXzEpIHtcbiAgICB2YXIgR2FtZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEdhbWUodmlld1BvcnRFbGVtZW50SWQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnRIZWlnaHQgPSA2MDA7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0V2lkdGggPSA4MDA7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2hpcCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJvY2tldCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmFsaWVucyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxibFNjb3JlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICAgICAgdGhpcy52aWV3UG9ydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZpZXdQb3J0RWxlbWVudElkKTtcbiAgICAgICAgICAgIHRoaXMuSW5pdGlhdGVCYXR0bGVmaWVsZCgpO1xuICAgICAgICAgICAgdGhpcy5Jbml0aWF0ZUV2ZW50cygpO1xuICAgICAgICB9XG4gICAgICAgIEdhbWUucHJvdG90eXBlLkluaXRpYXRlQmF0dGxlZmllbGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUud2lkdGggPSB0aGlzLnZpZXdQb3J0V2lkdGgudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0LnN0eWxlLmhlaWdodCA9IHRoaXMudmlld1BvcnRIZWlnaHQudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgICAgICB0aGlzLnZpZXdQb3J0LnN0eWxlLmxlZnQgPSAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAtIHRoaXMudmlld1BvcnRXaWR0aCkgLyAyKS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUudG9wID0gKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gdGhpcy52aWV3UG9ydEhlaWdodCkgLyAyKS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMudmlld1BvcnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ0JsYWNrJztcbiAgICAgICAgICAgIHRoaXMuc2hpcCA9IG5ldyBTaGlwXzEuU2hpcCgnSW1hZ2VzL0FsaWVuLnBuZycsIHRoaXMudmlld1BvcnQpO1xuICAgICAgICAgICAgdGhpcy5zaGlwLlNldFhQb3ModGhpcy52aWV3UG9ydFdpZHRoIC8gMik7XG4gICAgICAgICAgICB0aGlzLnNoaXAuU2V0WVBvcyh0aGlzLnZpZXdQb3J0SGVpZ2h0IC0gdGhpcy5zaGlwLmltYWdlLmhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLnJvY2tldCA9IG5ldyBSb2NrZXRfMS5Sb2NrZXQoJ0ltYWdlcy9Sb2NrZXQucG5nJywgdGhpcy52aWV3UG9ydCk7XG4gICAgICAgICAgICB0aGlzLmFsaWVucyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXhZID0gMDsgaW5kZXhZIDwgMjsgaW5kZXhZKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgMTA7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsaWVuID0gbmV3IEFsaWVuXzEuQWxpZW4oJ0ltYWdlcy9JbnZhZGVyLnBuZycsIHRoaXMudmlld1BvcnQsIFsnSW1hZ2VzL0Jsb3d1cDEucG5nJywgJ0ltYWdlcy9CbG93dXAyLnBuZycsICdJbWFnZXMvQmxvd3VwMy5wbmcnLCAnSW1hZ2VzL0Jsb3d1cDQucG5nJ10pO1xuICAgICAgICAgICAgICAgICAgICBhbGllbi5TdGFydChNYXRoLm1heCgoYWxpZW4ud2lkdGggKyAyMCkgKiBpbmRleCwgMSksIE1hdGgubWF4KChhbGllbi5oZWlnaHQgKyAxNSkgKiBpbmRleFksIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgYWxpZW4uY3VycmVudERpcmVjdGlvbiA9IEFsaWVuXzEuQWxpZW4uRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsaWVucy5wdXNoKGFsaWVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEdhbWUucHJvdG90eXBlLkluaXRpYXRlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucm9ja2V0LmFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9ja2V0Lk1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucm9ja2V0LmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm9ja2V0UmVjdCA9IF90aGlzLnJvY2tldC5pbWFnZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IF90aGlzLmFsaWVucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hbGllbnNbaW5kZXhdLmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGllblJlY3QgPSBfdGhpcy5hbGllbnNbaW5kZXhdLmltYWdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJvY2tldFJlY3QucmlnaHQgPCBhbGllblJlY3QubGVmdCB8fCByb2NrZXRSZWN0LmxlZnQgPiBhbGllblJlY3QucmlnaHQgfHwgcm9ja2V0UmVjdC5ib3R0b20gPCBhbGllblJlY3QudG9wIHx8IHJvY2tldFJlY3QudG9wID4gYWxpZW5SZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWxpZW5zW2luZGV4XS5LaWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvY2tldC5LaWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjb3JlICs9IDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxibFNjb3JlLnRleHRDb250ZW50ID0gX3RoaXMuc2NvcmUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX3RoaXMuYWxpZW5zLmxlbmd0aDsgaW5kZXgrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmFsaWVuc1tpbmRleF0uYWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWxpZW5zW2luZGV4XS5Nb3ZlKCk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5RXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGtleUV2ZW50ICYmIGtleUV2ZW50LmtleUNvZGUpXG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPSBrZXlFdmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdpbmRvdy5ldmVudCAmJiB3aW5kb3cuZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEdhbWUuS2V5Q29kZXMuTGVmdEFycm93OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgR2FtZS5LZXlDb2Rlcy5SaWdodEFycm93OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaGlwLk1vdmUoa2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgR2FtZS5LZXlDb2Rlcy5TcGFjZUJhcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnJvY2tldC5hY3RpdmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2NrZXQuTW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb2NrZXQuU3RhcnQoX3RoaXMuc2hpcC5wb3NYICsgKF90aGlzLnNoaXAud2lkdGggLyAyKSwgX3RoaXMuc2hpcC5wb3NZKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBHYW1lLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudChldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICB9O1xuICAgICAgICBHYW1lLktleUNvZGVzID0geyBMZWZ0QXJyb3c6IDM3LCBSaWdodEFycm93OiAzOSwgU3BhY2VCYXI6IDMyIH07XG4gICAgICAgIHJldHVybiBHYW1lO1xuICAgIH0oKSk7XG4gICAgR2FtZV8xLkdhbWUgPSBHYW1lO1xufSkoR2FtZSA9IGV4cG9ydHMuR2FtZSB8fCAoZXhwb3J0cy5HYW1lID0ge30pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=